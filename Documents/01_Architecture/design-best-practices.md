# Eede 設計ベストプラクティス

### ドメイン駆動開発（DDD）と振る舞い駆動開発（BDD）

## 1. ドメインの理解と戦略的モデリング

- **ドメインエキスパートとの協働:** イベントストーミング等でビジネス概念、ルール、プロセスを抽出。
- **バウンデッドコンテキストの定義:** システムをサブドメインに分割し、責務と用語（ユビキタス言語）を明確化。

## 2. ユーザーストーリーの作成（DDDの観点から）

- **ビジネス価値を軸に:** ユーザー視点で「誰が、何を、なぜ」を記述。ドメイン固有の用語を使用。
- **ユーザーストーリーの抽象度:** BDDシナリオで具体的な振る舞いを定義。

## 3. BDDシナリオの作成

- **受け入れ基準の明確化:** 各ユーザーストーリーに対し、Given-When-Then形式のシナリオを作成。
  - Given（前提条件）- When（アクション）- Then（結果）
- **ドメインの振る舞いの定義:** シナリオ内でドメインモデルの振る舞いを記述し、ビジネスルールを明確化。
- **自動テストとしての利用:** BDDシナリオを自動テストツールで実行し、「生きた仕様」として運用。

## 4. ユーザーストーリーとBDDシナリオの連携

- **双方向のリンク付け:** ユーザーストーリー（ビジネス要求）とBDDシナリオ（具体的な条件）を連携。
- **ユビキタス言語の徹底:** ユーザーストーリー、BDDシナリオ、ドメインモデルで同一の用語を使用。

## 5. ドメインモデルの設計と実装

- **集約の設計:** ユーザーストーリーとBDDシナリオに基づき、集約（Aggregate）を定義。
- **ドメインサービス・ファクトリの活用:** ドメインサービスは極力排除し、ビジネスロジックは各エンティティやバリューオブジェクトに閉じ込める
- **振る舞いの実装:** BDDシナリオのWhen-Then部分に対応する処理を集約メソッド等に実装。
- **TDD/BDDを活用した実装サイクル:** BDDシナリオ（テスト）を実装し、コードを書き、テストをパスさせるサイクル。

## 6. 継続的なフィードバックとリファクタリング

- **テストの実行とレビュー:** BDDシナリオを常に実行し、要求の変化に応じて更新。
- **リファクタリング:** ドメイン知識の深化に伴い、コードやモデルを継続的にリファクタリング。
