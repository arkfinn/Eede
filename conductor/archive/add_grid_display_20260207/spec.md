# トラック仕様書: 作業エリアへのグリッド表示機能の追加

## 概要
作業エリア（キャンバス）において、精密な作業を支援するための2種類のグリッド表示機能を導入します。ピクセル単位の境界を示す「1pxグリッド」と、作業範囲の区切りを示す「カーソルグリッド」を、独立して表示・非表示制御できるようにします。

## 機能要件

### 1. グリッドの種類と表示条件
- **1pxグリッド**
    - 表示条件: 拡大倍率が **x4以上** の場合のみ表示。
    - 倍率がx4未満の時にボタンがONの場合は、表示を抑制するが、x4に達した時点で自動的に表示される（状態保持）。
- **カーソルグリッド**
    - 表示条件: **全倍率** で表示。
    - 表示サイズ: 現在のカーソルサイズ（`CursorSize`）単位。

### 2. 描画スタイル（ダイナミック・グレー）
背景の明るさに応じて視認性を維持する半透明のグレーを採用します。
- **1pxグリッド**: 超低不透明度の実線（ピクセル境界の気配を感じさせる程度）。
- **カーソルグリッド**: 1pxグリッドより一段階濃い不透明度の、または破線（Dashed Line）。

### 3. ユーザーインターフェース
- **上部ツールバー**: 以下の2つの独立したトグルボタンを追加します。
    - 1pxグリッド表示 ON/OFF
    - カーソルグリッド表示 ON/OFF
- 各ボタンは独立しており、両方の同時表示が可能です。

## 非機能要件
- 描画パフォーマンス: グリッド描画によるキャンバスのスクロールや拡大縮小のレスポンス低下を最小限に抑える。
- 視覚的優先順位: グリッドは描画内容（画像）の上にオーバーレイとして描画するが、描画内容を過度に妨げない不透明度とする。

## 受入基準
- [ ] 拡大倍率x4以上で1pxグリッドが表示されること。
- [ ] 拡大倍率x4未満で1pxグリッドが非表示になること。
- [ ] 倍率に関わらずカーソルサイズのグリッドが表示されること。
- [ ] ツールバーの2つのボタンで、それぞれのグリッドのON/OFFが独立して切り替わること。
- [ ] 背景色が変化しても、グリッドが視認可能であること。

## 対象外
- グリッドの色のユーザーによる任意変更機能（初期実装では固定のダイナミック・グレーのみ）。
- グリッドの線幅の変更機能。
