# トラック仕様: 選択範囲の移動挙動の改善（切り取り＆プレビュー）

## 概要
現在の選択範囲移動は「コピー（元の位置に画像が残る）」の挙動ですが、これを「切り取り（移動開始時に元の位置から消える）」に変更します。また、移動直後に即時確定するのではなく「プレビュー状態」を維持し、ユーザーが納得するまで微調整を行えるようにすることで、精度の高い配置を可能にします。

## 機能要件
- **切り取り移動:**
    - ドラッグ開始時、選択範囲内の画像データを元の位置から削除する。
    - 移動中は、移動先の位置に画像が「プレビュー」として表示される。
- **プレビュー状態の維持と微調整:**
    - ドラッグを終了しても、即座にキャンバスへ描画を書き込まない（プレビュー状態）。
    - プレビュー状態では、同じ選択範囲を再度ドラッグして位置を微調整できる。
- **描画の確定:**
    - 以下の操作が行われた際に、プレビュー中の画像を現在の位置でキャンバスに確定（書き込み）する。
        - 選択範囲の外をクリックする。
        - 別の描画ツール（ペン、図形など）に切り替える。
- **キャンセルのサポート:**
    - 右クリックが押された場合、移動操作をキャンセルし、画像データを元の位置・状態に戻す。

## 非機能要件
- **Undo/Redo:**
    - 「切り取り」から「確定」までの一連 of 操作を一工程として Undo/Redo 可能にする。
- **パフォーマンス:**
    - ドラッグ中のプレビュー表示に遅延が発生しないこと。

## 受入条件
- [ ] 選択範囲をドラッグした際、元の位置からドットが消えていること。
- [ ] ドラッグを離した後も、再度ドラッグして位置を動かせること。
- [ ] 選択範囲外をクリックすると、画像がその位置で固定され、Undo履歴に追加されること。
- [ ] 右クリックで操作を中断した際、画像が移動前の状態（元の位置）に復元されること。

## アウトオブスコープ
- 複数レイヤーを跨いだ移動（本ツールはレイヤー非搭載のため）。
- 拡大縮小・回転などの変形操作（本トラックでは位置移動のみを対象とする）。
